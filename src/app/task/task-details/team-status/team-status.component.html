<app-modal></app-modal>
<div class="overflow-auto h-100 ">
<!-- Assign User Row -->
  <div class="sM0-supp-0-bg position-sticky OM-sticky-top">
    <div class="row mx-0 py-4 sM0-supp-1-bg d-flex mb-1 sM0-t-r-radius ">
    <!-- 1st Column Holder { Assign User } -->
    <div class="col-4 sM0-click py-2 pl-5" >
      <p class="m-0 sM0-fs-16 sM0-text-0-cr d-flex align-items-center">
        <i (click)="openModal()" class="sM0-icon-d sM0-bg-opacity-green-25 rounded-circle p-4 OM-icon-plus sM0-bg-imgs-center mr-2"></i>Assign User
      </p>
    </div>
    <!-- 2st Column Holder { Button } -->
      <!-- start button (pinding = 1) -->
      <ng-container *ngIf='taskDetailsService.taskDetails?.tasks_status == "1"'>
        <div class="col-4 p-0 d-flex justify-content-center align-items-center">
          <button (click)='startTask($event, taskDetailsService.propID)'
            class="btn sM0-btn-w-100 d-flex justify-content-center align-items-center sM0-t-l-radius sM0-bg-opacity-gold-25 pl-2 py-2">
            <i class="OM-img-thunder sM0-icon-d sM0-bg-imgs-center mr-2"></i>
            <p class="sM0-text-0-cr d-inline-block mb-0 sM0-fs-12">Start</p>
          </button>
          <!-- cancle button -->
          <button
            class="btn sM0-btn-w-65 d-flex justify-content-center align-items-center sM0-r-b-radius sM0-bg-opacity-red-25 ml-2 pr-4 py-2">
            <i class="OM-img-wrong sM0-icon-d sM0-bg-imgs-center"></i>
          </button>
        </div>
      </ng-container>
    <!-- In progress task Status (InProgress = 2) -->
    <ng-container *ngIf='taskDetailsService.taskDetails?.tasks_status == "2" ' >
      <div class="col-4 p-0 d-flex justify-content-center align-items-center">
        <button class="sM0-btn-w-160 sM0-text-0-cr sM0-fs-12 sM0-f-radius d-flex align-items-center justify-content-center btn sM0-supp-0-bg">
          <i class="sM0-icon-d OM-icon-inprogress sM0-bg-imgs-center mr-3"></i>In-Progress
        </button>
      </div>
    </ng-container>
    <!-- 3st Column Holder { Timer } -->
    <div class="col-4 d-flex pr-5 pl-0 align-items-center">
      <div class="w-100 d-flex justify-content-end">
        <p class="mb-0 sM0-fs-16 sM0-text-0-cr d-flex flex-column align-items-center">
          <i class="sM0-icon-d OM-icon-alarm mb-1 sM0-bg-imgs-center"></i>00 : 00
        </p>
      </div>
      <div class="w-100 d-flex justify-content-end">
      <p class="mb-0 sM0-fs-16 sM0-danger-cr d-flex flex-column align-items-center">
        <i class="sM0-icon-d OM-icon-flagred mb-1 sM0-bg-imgs-center"></i>48 : 00
        </p>
      </div>
    </div>
    </div>
  </div>
  <!--Users Row -->
  <div *ngFor="let assignUser of taskDetailsService?.assignedUsers" class="row mx-0 py-3 sM0-bg-opacity-gray-90~ sM0-bg-opacity-gold-25~ sM0-bg-opacity-gray-90 mb-1 d-flex ">
    <!-- 1st Column Holder { User Profile Img } -->
    <div (click)="goToUserProfile(assignUser.users_id)" class="sM0-click col-4 py-2 pl-5 sM0-bg-opacity-dark-90~ sM0-bg-opacity-white-5 sM0-r-b-radius d-flex align-items-center">
      <div>
        <i class="d-block sM0-img-e sM0-circle-border sM0-bg-imgs-center" [ngStyle]="{'background-image' : 'url('+ imageBaseURL + assignUser.image +')'}"></i>
      </div>
      <div class="pl-2">
        <p class="mb-0 sM0-main-cr">{{assignUser.name}}</p>
          <p class="sM0-fs-10 m-0 sM0-text-0-cr d-flex align-items-center ">
            <i
            [class.iM0-icon-dubiAdmin-white]="assignUser?.role_id == 2"
            [class.iM0-icon-accountManger-white]="assignUser?.role_id == 3"
            [class.iM0-icon-camera-white]="assignUser?.role_id == 4"
            [class.iM0-icon-designers-white]="assignUser?.role_id == 5"
            [class.iM0-icon-contentManger-white]="assignUser?.role_id == 6"
            class="sM0-icon-e sM0-bg-imgs-center mb-1 mr-1"></i>
            {{assignUser?.role_name}}
        </p>
      </div>
    </div>
    <!-- 2st Column Holder { Button } -->
    <div class="col-4 d-flex justify-content-center align-items-center">
      <!-- Pending buttton -->
      <ng-container *ngIf='assignUser?.current_status_id == "1"'>
        <!-- Pending buttton -->
        <button
          class="btn sM0-btn-w-100 d-flex justify-content-center align-items-center sM0-t-l-radius sM0-bg-opacity-gold-25 pl-2 py-2">
          <i class="OM-icon-timergold sM0-icon-d sM0-bg-imgs-center mr-2"></i>
          <p class="sM0-main-cr d-inline-block mb-0 sM0-fs-12">Pending</p>
        </button>
        <!-- cancle button -->
        <button
          class="btn sM0-btn-w-58 d-flex justify-content-center align-items-center sM0-r-b-radius sM0-bg-opacity-gold-25 ml-1 pr-4 py-2">
          <i class="OM-icon-exclamationgold sM0-icon-d sM0-bg-imgs-center"></i>
        </button>
      </ng-container>
      <!-- In-Progress status -->
      <ng-container *ngIf='assignUser?.current_status_id == "2"'>
        <button
          class="sM0-btn-w-160 sM0-text-0-cr sM0-fs-12 sM0-f-radius d-flex align-items-center justify-content-center btn sM0-supp-0-bg">
          <i class="sM0-icon-d OM-icon-inprogress sM0-bg-imgs-center mr-3"></i>In-Progress
        </button>
      </ng-container>
      <!-- Completed Status -->
      <ng-container *ngIf='assignUser?.current_status_id == "4"'>
        <button
          class="sM0-btn-w-160 sM0-green-cr sM0-bg-opacity-green-25 sM0-fs-12 sM0-f-radius d-flex align-items-center justify-content-center btn sM0-supp-0-bg">
          <i class="sM0-icon-d iM0-icon-right-green sM0-bg-imgs-center mr-3"></i>Completed
        </button>
      </ng-container>
    </div>
    <!-- 3st Column Holder { Timer } -->
    <div class="col-4 d-flex pr-5 pl-0 align-items-center">
      <div class="w-100 d-flex justify-content-end">
        <p class="mb-0 sM0-fs-16 sM0-main-cr d-flex flex-column align-items-center">
          <i class="sM0-icon-d OM-icon-alarmgold mb-1 sM0-bg-imgs-center"></i>{{assignUser?.created_at | date:"MM/dd/yy"}}
        </p>
      </div>
      <div class="w-100 d-flex justify-content-end">
        <p class="mb-0 sM0-fs-16 sM0-danger-cr d-flex flex-column align-items-center">
          <i class="sM0-icon-d OM-icon-flagred mb-1 sM0-bg-imgs-center"></i>{{assignUser?.expiry_date |  date:"MM/dd/yy"}}
        </p>
      </div>
    </div>
  </div>

</div>